<div id="page-content">
    <div class="card card-md">
        <div class="card-header">Log in</div>

        <form action="#" method="post">
            <paper-input-decorator floatingLabel label="Username">
                <input is="core-input" name="username" id="username">
            </paper-input-decorator>

            <paper-input-decorator floatingLabel label="Password">
                <input is="core-input" name="password" id="password">
            </paper-input-decorator>

            <div horizontal center-justified layout>
                <button type="submit" id="connexion" onclick="document.getElementById('toast').show()" is="paper-button-submit">
                    Log in
                </button>
            </div>

            <paper-toast id="toast" text="Your username or password is incorrect."></paper-toast>
        </form>

        <script>
        $(function() {
            'use strict';

            /**
             * Users from the future database.
             *
             * @type {Array} User's data: id, username, password, credits
             */
            var users = [{
                'id': '1',
                'username': 'Paris',
                'password': 'pass',
                'credits': '150'
            }, {
                'id': '2',
                'username': 'Imbert',
                'password': 'mdp',
                'credits': '200'
            }, {
                'id': '3',
                'username': 'user',
                'password': 'user',
                'credits': '200'
            }];

            /**
             * Logs the user in.
             *
             * @param  {object} e The event
             */
            $('#connexion').on('click', function(e) {
                e.preventDefault();
                var username = $('#username').val();
                var password = $('#password').val();

                users.forEach(function(user) {
                    if (user.username == username && user.password == password) {
                        $(location).attr('href', '#home');
                        return;
                    }
                });

                /*$.ajax({
                    type: 'GET',
                    url: '/users.json',
                    data: 'username=' + username + '&password=' + password,
                    timeout: 3000,
                    success: function(user) {
                        console.log('Connecté');
                    },
                    error: function(err) {
                        console.log('Problème de connexion au serveur');
                    }
                });*/
            })
        });
        </script>
    </div>
</div>
